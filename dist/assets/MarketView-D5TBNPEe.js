import{_ as b,d as p,e as y,b as T,o as m,c as g,a as t,F as w,r as $,O as V,t as c,M as D,f as h,g as I,P as W,Q as z}from"./index-DvfOFjwQ.js";import{E as C}from"./EchartsStore-a3wPI9BJ.js";function _(d,o="YYYY-MM-DD"){const e=d.getFullYear(),s=String(d.getMonth()+1).padStart(2,"0"),n=String(d.getDate()).padStart(2,"0");if(o==="YYYY-MM-DD")return`${e}-${s}-${n}`;if(o==="YYYY年MM月DD日")return`${e}年${s}月${n}日`;if(o==="MM-DD")return`${s}-${n}`;if(o==="MM月DD日")return`${s}月${n}日`;throw new Error("Unsupported format")}function A(d){const o=[{regex:/^(\d{4})-(\d{2})-(\d{2})$/,format:"YYYY-MM-DD"},{regex:/^(\d{4})年(\d{2})月(\d{2})日$/,format:"YYYY年MM月DD日"},{regex:/^(\d{2})-(\d{2})$/,format:"MM-DD"},{regex:/^(\d{2})月(\d{2})日$/,format:"MM月DD日"}];for(const{regex:e,format:s}of o){const n=d.match(e);if(n){let r,l,i;return s==="YYYY-MM-DD"||s==="YYYY年MM月DD日"?(r=parseInt(n[1],10),l=parseInt(n[2],10)-1,i=parseInt(n[3],10)):s==="MM-DD"?(r=new Date().getFullYear(),l=parseInt(n[1],10)-1,i=parseInt(n[2],10)):s==="MM月DD日"&&(r=new Date().getFullYear(),l=parseInt(n[1],10)-1,i=parseInt(n[2],10)),{date:new Date(r,l,i),format:s}}}throw new Error("Invalid date format")}function E(d=null,o="YYYY-MM-DD"){try{let e,s=o;if(d){const{date:u,format:v}=A(d);e=u,s=v}else e=new Date;const n=24*60*60*1e3,r=_(e,s),l=new Date(e.getTime()-n),i=_(l,s),f=[];for(let u=7;u>0;u--){const v=new Date(e.getTime()-u*n);f.push(_(v,s))}return{year:e.getFullYear(),currentDate:r,previousDate:i,datesOfWeek:f}}catch(e){return console.error("Error parsing date:",e),{year:null,currentDate:"Invalid date",previousDate:"Invalid date",datesOfWeek:["Invalid date","Invalid date","Invalid date","Invalid date","Invalid date","Invalid date","Invalid date"]}}}function S(d){try{const{date:o,format:e}=A(d),s=24*60*60*1e3,n=new Date(o.getTime()-s),r=_(n,e),l=new Date(o.getTime()+s),i=_(l,e);return{previousDate:r,nextDate:i}}catch(o){return console.error("Error parsing date:",o),{previousDate:"Invalid date",nextDate:"Invalid date"}}}const q={class:"news-container"},B={class:"title"},H={class:"tabs"},j=["onMouseover"],Q={class:"news-list"},U={__name:"ProductNews",props:{news:{type:Array,required:!0,default:()=>[]}},setup(d){const o=d,e=p(o.news.length>0?o.news[0].name:""),s=y(()=>{const r=o.news.find(l=>l.name===e.value);return r?r.items:[]}),n=r=>{e.value=r};return T(()=>{o.news.length>0&&(e.value=o.news[0].name)}),(r,l)=>(m(),g("div",q,[t("div",B,[t("ul",H,[(m(!0),g(w,null,$(d.news,(i,f)=>(m(),g("li",{key:f,onMouseover:u=>n(i.name),class:V({active:i.name===e.value})},c(i.name),43,j))),128))]),l[0]||(l[0]=t("a",{href:"#"}," 更多 ❯ ",-1))]),t("div",Q,[t("ul",null,[(m(!0),g(w,null,$(s.value,(i,f)=>(m(),g("li",{key:f},c(i),1))),128))])])]))}},P=b(U,[["__scopeId","data-v-0ea4fefc"]]),Z={class:"date_box"},G={class:"date"},J=["disabled"],K={__name:"HandoffDAte",setup(d){const o=E(null,"MM月DD日"),e=p(o.previousDate),s=p(e.value),n=y(()=>s.value),r=y(()=>n.value===e.value),l=u=>{s.value=u},i=()=>{const{previousDate:u}=S(s.value);l(u)},f=()=>{const{nextDate:u}=S(s.value);l(u)};return(u,v)=>(m(),g("div",Z,[t("button",{class:"arrow arrow-left",onClick:i},v[0]||(v[0]=[t("span",null,"❮",-1)])),t("div",G,c(n.value),1),t("button",{class:V(["arrow arrow-right",{disabled:r.value}]),disabled:r.value,onClick:f},v[1]||(v[1]=[t("span",null,"❯",-1)]),10,J)]))}},R=b(K,[["__scopeId","data-v-0ccb3089"]]),X={class:"container"},tt={class:"left"},et={class:"main"},nt={class:"echarts"},at={class:"info"},st={class:"info_box"},ot={class:"info_box"},rt={class:"info_box"},lt={class:"info_box"},it={class:"content"},dt={class:"unit"},ut=["href"],ct={class:"right"},vt={__name:"MarketView",setup(d){const o=E(null,"MM-DD"),e=[29.5,29,24.5,32,19.5,22.5,27.5],s=y(()=>Math.round(Math.max(...e)*100)/100);console.log(s);const n=y(()=>Math.min(...e));n.value=Math.round(n.value*100)/100,console.log(n.value);const r=y(()=>e.reduce((F,a)=>F+a,0)/e.length),l=p(e[6]),i=p(s),f=p(n),u=Math.round(r.value*100)/100;let v=p("价格平稳");e[6]>e[5]?v=p("价格上涨"):e[6]<e[5]&&(v=p("价格下跌"));const k=p((s.value-n.value)/4),Y=Math.round(s.value+k.value),x=Math.round(n.value-k.value),L=Math.round((Y-x)/4),N=p([{id:1,date:"2024-10-31",product:"元蘑",location:"吉林通化市东昌区",price:"59.5元/斤",trend:"-",chartLink:"#"},{id:2,date:"2024-10-30",product:"香菇",location:"浙江丽水市莲都区",price:"60.0元/斤",trend:"+",chartLink:"#"},{id:3,date:"2024-10-29",product:"木耳",location:"四川广元市利州区",price:"58.5元/斤",trend:"-",chartLink:"#"}]),O=p({animation:!0,animationDuration:1e3,title:{subtext:"七天内行情趋势图",left:"center",textStyle:{fontSize:16}},legend:{data:["价格"],orient:"vertical",left:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},feature:{saveAsImage:{},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{}}},visualMap:{min:x,max:Y,color:["#FF0000","#00FF00","#0000FF"],calculable:!0,text:[""],textStyle:{padding:[0,0,0,-12],align:"left",fontSize:10}},grid:{top:"20%",left:"8%",right:"6%",bottom:"5%",containLabel:!0},dataZoom:[{type:"slider",show:!0,start:0,end:100},{type:"inside",start:0,end:100}],xAxis:{type:"category",data:o.datesOfWeek},yAxis:{type:"value",name:"价格",min:Y,max:x,interval:L},series:[{name:"价格",type:"line",smooth:!0,data:e,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]});return T(()=>{}),(F,a)=>(m(),g(w,null,[a[14]||(a[14]=t("div",{class:"title"},[t("p",null,"当前位置>行情大厅>蔬菜>元蘑>吉林通化东昌区")],-1)),t("div",X,[t("div",tt,[t("div",et,[a[11]||(a[11]=D(" gn ")),t("div",nt,[h(C,{options:O.value,height:"300px"},null,8,["options"]),a[0]||(a[0]=t("div",null,"吉林通化东昌区 元蘑",-1)),t("div",null,[h(R)]),a[1]||(a[1]=t("div",null," 开会员了解更多元蘑行情，看最佳买卖时机，找热门买卖地，定最赚买卖价格 ❯ ",-1))]),t("div",at,[a[7]||(a[7]=t("div",{class:"section"},"查看该产地全部行情 >",-1)),a[8]||(a[8]=t("div",{class:"info_box"},[D(" 单位 "),t("span",{class:"unit"}," 元/斤 ")],-1)),a[9]||(a[9]=t("div",{class:"section"},"当日价格",-1)),t("div",st,[a[2]||(a[2]=D(" 当日均价（元/斤）： ")),t("span",null,c(l.value),1)]),t("div",ot,[a[3]||(a[3]=D(" 相对比前日： ")),t("span",null,c(I(v)),1)]),a[10]||(a[10]=t("div",{class:"section"},"近7日价格",-1)),t("div",rt,[a[4]||(a[4]=D(" 近7日最高价（元/斤）： ")),t("span",null,c(i.value),1)]),t("div",lt,[a[5]||(a[5]=D(" 近7日最低价（元/斤）： ")),t("span",null,c(f.value),1)]),t("div",{class:"info_box"},[a[6]||(a[6]=D(" 近7日均价（元/斤）： ")),t("span",null,c(u))])])]),t("div",it,[t("table",null,[a[12]||(a[12]=t("thead",null,[t("tr",null,[t("th",null,"时间"),t("th",null,"产品/品种"),t("th",null,"所在产地"),t("th",null,"价格"),t("th",null,"升/降"),t("th",null,"走势图")])],-1)),t("tbody",null,[(m(!0),g(w,null,$(N.value,M=>(m(),g("tr",{key:M.id},[t("td",null,c(M.date),1),t("td",null,c(M.product),1),t("td",null,c(M.location),1),t("td",null,c(M.price),1),t("td",null,c(M.trend),1),t("td",dt,[t("a",{href:M.chartLink}," 查看走势 ",8,ut)])]))),128))])])])]),t("div",ct,[a[13]||(a[13]=t("div",{class:"contact"},[t("div",null,"获取更多数据服务，请联系"),t("p",null,[t("span",{class:"icon phone-icon"}),D("电话: 400-008-8888")]),t("p",null,[t("span",{class:"icon email-icon"}),D("邮箱: hkq@qzh.cn")])],-1)),h(P,{news:I(W)},null,8,["news"]),h(P,{news:I(z)},null,8,["news"])])])],64))}},Dt=b(vt,[["__scopeId","data-v-1a82d0fb"]]);export{Dt as default};
