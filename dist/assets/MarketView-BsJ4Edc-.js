import{_ as b,l as O,o as z,a as C}from"./index-DBvwnPll.js";import{r as f,c as y,l as V,o as m,a as M,b as t,F as w,e as $,n as A,t as c,g as D,f as _,u as I}from"./vendor-DljaJcOa.js";import{E as q}from"./EchartsStore-iUE7t2zy.js";function h(d,o="YYYY-MM-DD"){const e=d.getFullYear(),s=String(d.getMonth()+1).padStart(2,"0"),a=String(d.getDate()).padStart(2,"0");if(o==="YYYY-MM-DD")return`${e}-${s}-${a}`;if(o==="YYYY年MM月DD日")return`${e}年${s}月${a}日`;if(o==="MM-DD")return`${s}-${a}`;if(o==="MM月DD日")return`${s}月${a}日`;throw new Error("Unsupported format")}function P(d){const o=[{regex:/^(\d{4})-(\d{2})-(\d{2})$/,format:"YYYY-MM-DD"},{regex:/^(\d{4})年(\d{2})月(\d{2})日$/,format:"YYYY年MM月DD日"},{regex:/^(\d{2})-(\d{2})$/,format:"MM-DD"},{regex:/^(\d{2})月(\d{2})日$/,format:"MM月DD日"}];for(const{regex:e,format:s}of o){const a=d.match(e);if(a){let r,l,i;return s==="YYYY-MM-DD"||s==="YYYY年MM月DD日"?(r=parseInt(a[1],10),l=parseInt(a[2],10)-1,i=parseInt(a[3],10)):s==="MM-DD"?(r=new Date().getFullYear(),l=parseInt(a[1],10)-1,i=parseInt(a[2],10)):s==="MM月DD日"&&(r=new Date().getFullYear(),l=parseInt(a[1],10)-1,i=parseInt(a[2],10)),{date:new Date(r,l,i),format:s}}}throw new Error("Invalid date format")}function E(d=null,o="YYYY-MM-DD"){try{let e,s=o;if(d){const{date:u,format:v}=P(d);e=u,s=v}else e=new Date;const a=24*60*60*1e3,r=h(e,s),l=new Date(e.getTime()-a),i=h(l,s),p=[];for(let u=7;u>0;u--){const v=new Date(e.getTime()-u*a);p.push(h(v,s))}return{year:e.getFullYear(),currentDate:r,previousDate:i,datesOfWeek:p}}catch(e){return console.error("Error parsing date:",e),{year:null,currentDate:"Invalid date",previousDate:"Invalid date",datesOfWeek:["Invalid date","Invalid date","Invalid date","Invalid date","Invalid date","Invalid date","Invalid date"]}}}function S(d){try{const{date:o,format:e}=P(d),s=24*60*60*1e3,a=new Date(o.getTime()-s),r=h(a,e),l=new Date(o.getTime()+s),i=h(l,e);return{previousDate:r,nextDate:i}}catch(o){return console.error("Error parsing date:",o),{previousDate:"Invalid date",nextDate:"Invalid date"}}}const B={class:"news-container"},H={class:"title"},j={class:"tabs"},U=["onMouseover"],Z={class:"news-list"},G={__name:"ProductNews",props:{news:{type:Array,required:!0,default:()=>[]}},setup(d){const o=d,e=f(o.news.length>0?o.news[0].name:""),s=y(()=>{const r=o.news.find(l=>l.name===e.value);return r?r.items:[]}),a=r=>{e.value=r};return V(()=>{o.news.length>0&&(e.value=o.news[0].name)}),(r,l)=>(m(),M("div",B,[t("div",H,[t("ul",j,[(m(!0),M(w,null,$(d.news,(i,p)=>(m(),M("li",{key:p,onMouseover:u=>a(i.name),class:A({active:i.name===e.value})},c(i.name),43,U))),128))]),l[0]||(l[0]=t("a",{href:"#"}," 更多 ❯ ",-1))]),t("div",Z,[t("ul",null,[(m(!0),M(w,null,$(s.value,(i,p)=>(m(),M("li",{key:p},c(i),1))),128))])])]))}},T=b(G,[["__scopeId","data-v-0ea4fefc"]]),J={class:"date_box"},K={class:"date"},Q=["disabled"],R={__name:"HandoffDAte",setup(d){const o=E(null,"MM月DD日"),e=f(o.previousDate),s=f(e.value),a=y(()=>s.value),r=y(()=>a.value===e.value),l=u=>{s.value=u},i=()=>{const{previousDate:u}=S(s.value);l(u)},p=()=>{const{nextDate:u}=S(s.value);l(u)};return(u,v)=>(m(),M("div",J,[t("button",{class:"arrow arrow-left",onClick:i},v[0]||(v[0]=[t("span",null,"❮",-1)])),t("div",K,c(a.value),1),t("button",{class:A(["arrow arrow-right",{disabled:r.value}]),disabled:r.value,onClick:p},v[1]||(v[1]=[t("span",null,"❯",-1)]),10,Q)]))}},X=b(R,[["__scopeId","data-v-0ccb3089"]]),tt={class:"container"},et={class:"left"},nt={class:"main"},at={class:"echarts"},st={class:"info"},ot={class:"info_box"},rt={class:"info_box"},lt={class:"info_box"},it={class:"info_box"},dt={class:"content"},ut={class:"unit"},ct=["href"],vt={class:"right"},pt={__name:"MarketView",setup(d){const o=E(null,"MM-DD"),e=[29.5,29,24.5,32,19.5,22.5,27.5],s=y(()=>Math.round(Math.max(...e)*100)/100),a=y(()=>Math.round(Math.min(...e)*100)/100),r=y(()=>e.reduce((F,n)=>F+n,0)/e.length),l=f(e[6]),i=f(s.value),p=f(a.value),u=Math.round(r.value*100)/100;let v=f("价格平稳");e[6]>e[5]?v.value="价格上涨":e[6]<e[5]&&(v.value="价格下跌");const k=f((s.value-a.value)/4),Y=Math.round(s.value+k.value),x=Math.round(a.value-k.value),L=Math.round((Y-x)/4),N=f([{id:1,date:"2024-10-31",product:"元蘑",location:"吉林通化市东昌区",price:"59.5元/斤",trend:"-",chartLink:"#"},{id:2,date:"2024-10-30",product:"香菇",location:"浙江丽水市莲都区",price:"60.0元/斤",trend:"+",chartLink:"#"},{id:3,date:"2024-10-29",product:"木耳",location:"四川广元市利州区",price:"58.5元/斤",trend:"-",chartLink:"#"}]),W=f({animation:!0,animationDuration:1e3,title:{subtext:"七天内行情趋势图",left:"center",textStyle:{fontSize:16}},legend:{data:["价格"],orient:"vertical",left:"left"},tooltip:{trigger:"axis",axisPointer:{type:"cross"},feature:{saveAsImage:{},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{}}},visualMap:{min:x,max:Y,color:["#FF0000","#00FF00","#0000FF"],calculable:!0,text:[""],textStyle:{padding:[0,0,0,-12],align:"left",fontSize:10}},grid:{top:"20%",left:"8%",right:"6%",bottom:"5%",containLabel:!0},dataZoom:[{type:"slider",show:!0,start:0,end:100},{type:"inside",start:0,end:100}],xAxis:{type:"category",data:o.datesOfWeek},yAxis:{type:"value",name:"价格",min:Y,max:x,interval:L},series:[{name:"价格",type:"line",smooth:!0,data:e,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]});return V(()=>{}),(F,n)=>(m(),M(w,null,[n[14]||(n[14]=t("div",{class:"title"},[t("p",null,"当前位置>行情大厅>蔬菜>元蘑>吉林通化东昌区")],-1)),t("div",tt,[t("div",et,[t("div",nt,[n[11]||(n[11]=D(" gn ")),t("div",at,[_(q,{options:W.value,height:"300px"},null,8,["options"]),n[0]||(n[0]=t("div",null,"吉林通化东昌区 元蘑",-1)),t("div",null,[_(X)]),n[1]||(n[1]=t("div",null," 开会员了解更多元蘑行情，看最佳买卖时机，找热门买卖地，定最赚买卖价格 ❯ ",-1))]),t("div",st,[n[7]||(n[7]=t("div",{class:"section"},"查看该产地全部行情 >",-1)),n[8]||(n[8]=t("div",{class:"info_box"},[D(" 单位 "),t("span",{class:"unit"}," 元/斤 ")],-1)),n[9]||(n[9]=t("div",{class:"section"},"当日价格",-1)),t("div",ot,[n[2]||(n[2]=D(" 当日均价（元/斤）： ")),t("span",null,c(l.value),1)]),t("div",rt,[n[3]||(n[3]=D(" 相对比前日： ")),t("span",null,c(I(v)),1)]),n[10]||(n[10]=t("div",{class:"section"},"近7日价格",-1)),t("div",lt,[n[4]||(n[4]=D(" 近7日最高价（元/斤）： ")),t("span",null,c(i.value),1)]),t("div",it,[n[5]||(n[5]=D(" 近7日最低价（元/斤）： ")),t("span",null,c(p.value),1)]),t("div",{class:"info_box"},[n[6]||(n[6]=D(" 近7日均价（元/斤）： ")),t("span",null,c(u))])])]),t("div",dt,[t("table",null,[n[12]||(n[12]=t("thead",null,[t("tr",null,[t("th",null,"时间"),t("th",null,"产品/品种"),t("th",null,"所在产地"),t("th",null,"价格"),t("th",null,"升/降"),t("th",null,"走势图")])],-1)),t("tbody",null,[(m(!0),M(w,null,$(N.value,g=>(m(),M("tr",{key:g.id},[t("td",null,c(g.date),1),t("td",null,c(g.product),1),t("td",null,c(g.location),1),t("td",null,c(g.price),1),t("td",null,c(g.trend),1),t("td",ut,[t("a",{href:g.chartLink}," 查看走势 ",8,ct)])]))),128))])])])]),t("div",vt,[n[13]||(n[13]=t("div",{class:"contact"},[t("div",null,"获取更多数据服务，请联系"),t("p",null,[t("span",{class:"icon phone-icon"}),D("电话: 400-008-8888")]),t("p",null,[t("span",{class:"icon email-icon"}),D("邮箱: hkq@qzh.cn")])],-1)),_(T,{news:I(O)},null,8,["news"]),_(T,{news:I(z)},null,8,["news"])])]),_(C)],64))}},Mt=b(pt,[["__scopeId","data-v-cc72f7e6"]]);export{Mt as default};
